<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: quiz.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: quiz.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState } from "react";
import axios from "axios";

/**
 * Quiz: The main component that renders the quiz interface.
 *
 * The Quiz component fetches a set of questions from the server, using the axios ibrary, and presents them to the user one by one.
 *
 * Users can answer a quuestionnaire that leads them to the results page that contains
 * the recommended college/major and a link to to read up on the college and major info, at the University of Nebraska at Omaha's website.
 *
 * A decision tree is used to record answers.
 *
 * We have a simple handleAnswerButtonClick and bestFits function that handle what happens an answer option is clicked and what is displayed at the results page.
 *
 * @returns {React.Element} The rendered quiz interface, questions, answer options, and final results.
 */
function Quiz() {
  const [questions, setQuestions] = useState([]);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [showScore, setShowScore] = useState(false);

  const [scores, updateScores] = useState({
    collegeARTSCI: 0,
    collegeBA: 0,
    collegeEDU: 0,
    collegeCOM: 0,
    collegeSCITECH: 0,
    collegePUBLIC: 0,
  });

  const collegeLinks = {
    collegeARTSCI:
      "https://www.unomaha.edu/college-of-arts-and-sciences/index.php",
    collegeBA:
      "https://www.unomaha.edu/college-of-business-administration/index.php",
    collegeEDU:
      "https://www.unomaha.edu/college-of-education-health-and-human-sciences/index.php",
    collegeCOM:
      "https://www.unomaha.edu/college-of-communication-fine-arts-and-media/communication/index.php",
    collegeSCITECH:
      "https://www.unomaha.edu/college-of-information-science-and-technology/index.php",
    collegePUBLIC:
      "https://www.unomaha.edu/college-of-public-affairs-and-community-service/index.php",
  };

  useEffect(() => {
    axios
      .get("http://localhost:3001/api/questions")
      .then((response) => {
        setQuestions(response.data);
      })
      .catch((error) => {
        console.error("Something went wrong!", error);
      });
  }, []);

  const handleAnswerButtonClick = (index) => {
    const scoreKeys = Object.keys(scores); // ["collegeARTSCI", "collegeBA", ...]

    updateScores((prevScores) => {
      const newScores = { ...prevScores }; // Updating the scores when an answer option is clicked
      newScores[scoreKeys[index]] += questions[currentQuestion].scores[index];
      return newScores;
    });

    const nextQuestion = currentQuestion + 1;
    if (nextQuestion &lt; questions.length) {
      setCurrentQuestion(nextQuestion);
    } else {
      setShowScore(true);
    }
  };

  const bestFits = (scores) => {
    let maxValue = 0;
    for (const [key, value] of Object.entries(scores)) {
      maxValue = Math.max(maxValue, value);
    }
    let bestFits = [];
    for (const [key, value] of Object.entries(scores)) {
      if (maxValue == value) {
        bestFits.push({ category: key, link: collegeLinks[key] });
      }
    }
    return bestFits;
  };

  return (
    &lt;div className="question-container">
      {showScore ? (
        &lt;div className="final-result-container">
          &lt;h2>Quiz Results&lt;/h2>
          &lt;h3>Best Fits:&lt;/h3>
          &lt;ul>
            {bestFits(scores).map((fit, index) => (
              &lt;li key={index}>
                &lt;a href={fit.link} target="_blank" rel="noreferrer">
                  {fit.category}
                &lt;/a>
              &lt;/li>
            ))}
          &lt;/ul>
        &lt;/div>
      ) : (
        &lt;div className="question-card">
          {questions.length > 0 ? (
            &lt;>
              &lt;h2>
                &lt;div className="question-number">
                  Question {currentQuestion + 1} of {questions.length}
                &lt;/div>
              &lt;/h2>
              &lt;h2>{questions[currentQuestion].questionText}&lt;/h2>
              &lt;div className="answer-container">
                {questions[currentQuestion].answerOptions.map(
                  (answerOption, index) => (
                    &lt;button
                      key={index}
                      onClick={() => handleAnswerButtonClick(index)}
                    >
                      {answerOption}
                    &lt;/button>
                  )
                )}
              &lt;/div>
            &lt;/>
          ) : (
            &lt;p>Loading questions...&lt;/p>
          )}
        &lt;/div>
      )}
    &lt;/div>
  );
}

export default Quiz;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-questions.html">questions</a></li><li><a href="module-server.html">server</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdminBackend">AdminBackend</a></li><li><a href="global.html#AdminLogin">AdminLogin</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#Quiz">Quiz</a></li><li><a href="global.html#root">root</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Aug 08 2023 16:29:11 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
